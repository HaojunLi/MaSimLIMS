{% extends "base.html" %}
{% load static %}

{% block title %}MaSim LIMS / Replicates{% endblock %}

{% block meta %} 
<!-- Refresh every minute -->
<!-- <meta http-equiv="refresh" content="60"> -->
<!-- <script type="text/javascript">
  // Sort by the start time once loaded
  $(document).ready(function() {
    sortTableByColumn(document.getElementById('replicateTable'), 1, false);
  })
  
  // AJAX function for the last 100 replicates
  var tableDataTmp = []
  function last100(){
    $.ajax({
      url: '/replicatesLatest100',
      type: 'POST',
      success: function(result) {
        location.replace('/replicatesLatest100')
      }
    });
  }
  </script> -->
{% endblock %}
{% block content %}
<script>
  // OK
  setInterval(function(){
      $('#table-body').empty();
      $('#pagination-wrapper').empty();
      tableDisplay('{{localURL}}',"replicateMessage","replicateTable");
      setTargetURL('{{localURL}}');
  }, 60000);
</script>

<div class="center" id="replicateMessage"><strong>{{ viewType }} {{ request.session.dbname }}</strong></div>
<table id="replicateTable" class="content-table" style="margin-left:auto; margin-right:auto; margin-top: 1em">
  <thead>
    {% if localURL == '/worthToNotice' or localURL == '/' %}
      <tr>
        <th>File Name</th>
        <th>Start Time</th>
        <th>Movement</th>
        <th>Running Time</th>
      </tr>
    {% else %}
      <tr>
        <th>File Name</th>
        <th>Start Time</th>
        <th>End Time</th>
        <th>Movement</th>
        <th>Running Time</th>
      </tr>
    {% endif %}
  </thead>
  <tfoot>
    <tr>
      <td colspan = "4">X - Movement not recorded, C - Movement is recorded at the cellular level, D - Movement is recorded at the distinct or province level</td>
    </tr>
  </tfoot>
  <tbody id = "table-body">
  </tbody>
</table>
<div>
  <div id="pagination-wrapper"></div>
</div>
<script src="{% static './js/tableDisplay.js' %}"></script>
<script src="{% static './js/last100Sort.js' %}"></script>
<script>
  tableDisplay('{{localURL}}',"replicateMessage","replicateTable");
  setTargetURL('{{localURL}}');
</script>
{% endblock %}